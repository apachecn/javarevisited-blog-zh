# ä¸€ä¸ªå¿…é¡»çŸ¥é“çš„å•å…ƒæµ‹è¯•æŠ€æœ¯ã€‚

> åŸæ–‡ï¼š<https://medium.com/javarevisited/argument-capturing-a-must-know-unit-testing-technique-e88b3a6a6af1?source=collection_archive---------3----------------------->

![](img/e291af2e601167574eff33738438a657.png)

**@Captor** æ˜¯ [**mockito åº“**](https://site.mockito.org/) ä¸­çš„ä¸€ä¸ªæ³¨é‡Šï¼Œå®ƒä¸ ***ArumentCaptor*** ç±»ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºæ•è·ä¼ é€’ç»™è¢«æ¨¡ä»¿å¯¹è±¡çš„æ–¹æ³•çš„å‚æ•°ã€‚å®ƒæ€»æ˜¯ä¸ ***verify()*** ä¸€èµ·ä½¿ç”¨ï¼Œä»¥æ£€ç´¢è°ƒç”¨æ¨¡æ‹Ÿä¾èµ–å…³ç³»ä¸­çš„æ–¹æ³•æ—¶ä¼ é€’çš„å‚æ•°ã€‚å®ƒæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å·¥å…·ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä¸ºæµ‹è¯•åˆ›å»ºé¢å¤–çš„æ–­è¨€ï¼Œä»è€Œä½¿æˆ‘ä»¬çš„å•å…ƒæµ‹è¯•æ›´åŠ å‡†ç¡®ã€‚

è¿™é‡Œæˆ‘ä»¬æœ‰ä¸€ä¸ª ***ç•™è¨€ç°¿*** ç±»ï¼Œå®ƒå°†æŠŠä¸€ä¸ª ***çš„ç•™è¨€ç°¿*** ä¿å­˜åˆ° ***çš„ç•™è¨€ç°¿åº“*** ã€‚***guestsBookRepository***æ˜¯è¯¥ç±»çš„ä¸€ä¸ªä¾èµ–é¡¹ï¼Œå¦‚æœæˆ‘ä»¬è¦ç¼–å†™ä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬å¿…é¡»æ¨¡æ‹Ÿå®ƒã€‚ä½ è®¤ä¸ºæ¨¡æ‹Ÿå°†è¶³ä»¥å‡†ç¡®åœ°æµ‹è¯•è¿™ä¸ªç±»å—ï¼Ÿ

å¦‚æœæˆ‘ä»¬è¦æ¨¡ä»¿è¿™ä¸ªç±»çš„ä¾èµ–æ€§å¹¶è¯•ç€æµ‹è¯•å®ƒã€‚æˆ‘ä»¬å”¯ä¸€èƒ½åšçš„å°±æ˜¯éªŒè¯ä¸***guest book repository***å¯¹è±¡çš„äº¤äº’ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½æ£€æŸ¥å‡†ç¡®ä¼ é€’çš„æ•°æ®ã€‚

åŸå› æ˜¯æˆ‘ä»¬æ²¡æœ‰æ§åˆ¶ç”¨äºç”Ÿæˆ ***guestEntry*** çš„***guest bookutils***ç±»ã€‚è¿™ç§çº¦æŸåœ¨[å•å…ƒæµ‹è¯•](/javarevisited/top-10-courses-to-learn-eclipse-junit-and-mockito-for-java-developers-4de1e8d62b96)æœ¯è¯­ä¸­ç§°ä¸º ***ç¡¬è¿çº¿ä¾èµ–*** ã€‚æˆ‘ä»¬è¯´è¿™æ˜¯ç¡¬è¿çº¿çš„ï¼Œå› ä¸ºè¿™ä¸ªç±»ç›®å‰æ²¡æœ‰æ³¨å…¥å®ƒçš„æœºåˆ¶ã€‚

è¿™ä¸ªæµ‹è¯•ä¸å‡†ç¡®ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ£€æŸ¥ä¼ é€’ç»™ save()æ–¹æ³•çš„å€¼

å¦‚æœåœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬è¦èŠ±ä¸€äº›æ—¶é—´æ¥è€ƒè™‘ OOD( [é¢å‘å¯¹è±¡è®¾è®¡](/javarevisited/my-favorite-courses-to-learn-object-oriented-programming-and-design-in-2019-197bab351733?source=collection_home---4------0-----------------------))ï¼Œä¹Ÿè®¸æˆ‘ä»¬ä¼šå¾—å‡ºè¿™æ ·çš„ç»“è®º:éœ€è¦ç”¨***guest bookutils***åšä¸€äº›äº‹æƒ…æ¥å…è®¸æˆ‘ä»¬è‡ªå·±æ›´å‡†ç¡®åœ°æµ‹è¯•è¿™ä¸ªç±»ã€‚

æ˜¯å¦åº”è¯¥å»æ‰[é™æ€æ–¹æ³•](https://javarevisited.blogspot.com/2011/11/static-keyword-method-variable-java.html)è°ƒç”¨ï¼Ÿè¦ä¸è¦æ³¨å…¥ä¸€ä¸ªå·¥å‚ï¼Ÿå¯èƒ½æœ‰å¾ˆå¤šäº‹æƒ…æˆ‘ä»¬å¯ä»¥è®©è¿™ä¸ªç±»æ›´æ˜“æµ‹è¯•ã€‚ä½†æ˜¯å¾ˆå¯èƒ½éœ€è¦é‡æ„ã€‚

é‡æ„æ²¡æœ‰é”™ï¼Œæˆ‘æ”¯æŒé‡æ„ï¼Œæˆ‘ç›¸ä¿¡æˆ‘ä»¬åº”è¯¥ä¸€ç›´åŠªåŠ›æé«˜æˆ‘ä»¬ä»£ç åº“çš„è´¨é‡ã€‚ä¸å¹¸çš„æ˜¯ï¼Œåœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¸å¾—ä¸æ¨è¿Ÿè¿™ç§å†³å®šï¼Œç‰¹åˆ«æ˜¯åœ¨éå¸¸å¤§å’Œå¤æ‚çš„ä»£ç åº“ä¸­ï¼Œæˆ–è€…å½“æˆ‘ä»¬éœ€è¦æ»¡è¶³ç´§è¿«çš„æœŸé™æ—¶ã€‚

å½“ç„¶ï¼Œæ¨è¿Ÿé‡æ„çš„å‰¯ä½œç”¨ä¼šæ˜¯æŠ€æœ¯å€ºçš„äº§ç”Ÿã€‚ä¹Ÿè®¸æˆ‘ä»¬ä¼šåœ¨å¦ä¸€ä¸ªæ•…äº‹ä¸­æ›´å¤šåœ°è®¨è®º[é‡æ„](https://javarevisited.blogspot.com/2020/12/top-5-course-to-improve-coding-skills.html#axzz6k4XBgTw4)ï¼Œä½†ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹ ***@Captor*** å¦‚ä½•åœ¨ä¸æ”¹å˜æˆ‘ä»¬çš„ç”Ÿäº§ä»£ç çš„æƒ…å†µä¸‹å¸®åŠ©æˆ‘ä»¬ã€‚

> **ä¹Ÿè®¸æ˜¯æ­£ç¡®çš„åšæ³•ï¼Œä½†ä¸æ˜¯åˆé€‚çš„æ—¶æœºã€‚**

åœ¨è¿™ä¸ªå•å…ƒæµ‹è¯•çš„æ›¿ä»£å®ç°ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ ***@Captor*** æ¥åˆ›å»ºä¸€ä¸ªæ›´ç²¾ç¡®çš„æµ‹è¯•ç‰ˆæœ¬ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰äº†é¢å¤–çš„æ–­è¨€ã€‚è¿™æ˜¯å¯èƒ½çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„***guest entrycaptor***æ­£åœ¨è®°å½•ä¼ é€’ç»™ ***save()*** æ–¹æ³•çš„å€¼ã€‚

å¤šäºäº†@Captor æ³¨é‡Šï¼Œæ›´ç²¾ç¡®çš„æµ‹è¯•æˆä¸ºå¯èƒ½

æœºåˆ¶éå¸¸ç®€å•ï¼Œä»¥ä¸‹æ˜¯æ­¥éª¤æ€»ç»“:

1.  åˆ›å»ºä¸€ä¸ªç±»å‹ä¸º***ArgumentCaptor***çš„å¯¹è±¡ï¼Œä½¿ç”¨é€šç”¨å‚æ•°æŒ‡å®šè¦æ•æ‰çš„å¯¹è±¡çš„ç±»å‹ã€‚
2.  ç”¨ ***@Captor*** æ³¨é‡Šæ³¨é‡Šè¯¥å¯¹è±¡ã€‚
3.  åœ¨æ‚¨é€šå¸¸çš„æ¨¡æ‹ŸéªŒè¯ä¸­ï¼Œè°ƒç”¨ ***capture()*** æ–¹æ³•æ¥å¯ç”¨æ•è·
4.  ä½¿ç”¨ captor å¯¹è±¡çš„ ***getValue()*** æ–¹æ³•è·å–è®°å½•çš„å€¼ï¼Œå¹¶å°†å®ƒä»¬èµ‹ç»™ä¸€ä¸ªå˜é‡ã€‚
5.  æ·»åŠ é™„åŠ æ–­è¨€

> **è®°ä½ï¼Œè¦æŒæ¡** [**å•å…ƒæµ‹è¯•çš„æŠ€å·§**](/javarevisited/5-courses-to-learn-junit-and-mockito-in-2019-best-of-lot-f217d8b93688) **ä½ éœ€è¦äº†è§£å¦‚ä½•ä½¿ç”¨ä½ çš„å·¥å…·ä»¥åŠä½•æ—¶ä½¿ç”¨å®ƒä»¬ã€‚**

å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•…äº‹ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€äº›æŒå£°ğŸ‘[**è·Ÿéšæˆ‘ä»¬ç®€ä»‹**](/@javing.uk)[**Javing**](http://www.javing.uk)æ˜¯ä¸€å®¶æ€»éƒ¨ä½äºä¼¦æ•¦çš„æ•æ· Java è½¯ä»¶å’¨è¯¢å…¬å¸ã€‚