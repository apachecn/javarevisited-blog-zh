# å¦‚ä½•åœ¨é˜¿å¸•å¥‡éª†é©¼ä¸­ä½¿ç”¨ Choice å’Œ Whenï¼Ÿ

> åŸæ–‡ï¼š<https://medium.com/javarevisited/how-to-use-choice-and-when-in-apache-camel-4f16c67bfa80?source=collection_archive---------0----------------------->

## é˜¿å¸•å¥‡éª†é©¼

HelloğŸ–æˆ‘è‡ªå·±[ç½—æ±‰Â·æ‹‰æ¸©å¾·æ‹‰Â·å¡è¾¾å§†](https://medium.com/u/a1b33b7cda75?source=post_page-----4f16c67bfa80--------------------------------)ï¼Œå…¨æ ˆå¼€å‘è€…

æ¬¢è¿ï¼Œå¼€å‘è€…ç¤¾åŒºï¼ï¼åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è¯•å›¾ç†è§£ä½¿ç”¨ [Apache Camel](https://javarevisited.blogspot.com/2022/02/top-5-courses-to-learn-apache-camel-in.html) çš„å¼‚å¸¸å¤„ç†ã€‚åœ¨ç›´æ¥è¿›å…¥æ–‡ç« ä¹‹å‰ï¼Œè®©æˆ‘ä»¬è¯•ç€ç†è§£ä¸ä¸»é¢˜ç›¸å…³çš„æŸäº›é—®é¢˜æˆ–ç–‘é—®ã€‚æˆ‘ä»¬å¯èƒ½ä¼šé—®ä»€ä¹ˆæ˜¯é˜¿å¸•å¥‡éª†é©¼ï¼Ÿä¸ºä»€ä¹ˆç”¨é˜¿å¸•å¥‡éª†é©¼ï¼Ÿå¦‚ä½•åœ¨é˜¿å¸•å¥‡éª†é©¼ä¸­ä½¿ç”¨ Choice å’Œ Whenï¼Ÿ

[![](img/10f8fa82e444ed7f7125f87ad02086d7.png)](https://www.java67.com/2022/02/5-best-apache-camel-courses-for-java.html)

å¦‚ä½•åœ¨é˜¿å¸•å¥‡éª†é©¼ä¸­ä½¿ç”¨é€‰æ‹©å’Œæ—¶é—´ï¼Ÿ

å˜¿ï¼Œç¤¾åŒºï¼Œè®©æˆ‘ä»¬æ·±å…¥åˆ°æˆ‘ä»¬çš„é—®é¢˜ä¸­å»ï¼Œæ‰¾åˆ°é—®é¢˜çš„ç­”æ¡ˆã€‚

## âš¡ä»€ä¹ˆæ˜¯é˜¿å¸•å¥‡éª†é©¼ï¼Ÿ

Apache Camel æ˜¯ä¸€ä¸ªåŸºäºå·²çŸ¥çš„[ä¼ä¸šé›†æˆæ¨¡å¼](https://camel.apache.org/components/3.15.x/eips/enterprise-integration-patterns.html)çš„é€šç”¨å¼€æºé›†æˆæ¡†æ¶ã€‚

Camel ä½¿æ‚¨èƒ½å¤Ÿç”¨å„ç§ç‰¹å®šäºé¢†åŸŸçš„è¯­è¨€( [DSL](https://camel.apache.org/manual/dsl.html) ï¼Œæ¯”å¦‚ [Java](/javarevisited/10-best-places-to-learn-java-online-for-free-ce5e713ab5b2) ï¼ŒXMLï¼Œ [Groovy](/javarevisited/6-best-resources-to-learn-groovy-and-grails-for-java-developers-18c04e88fa8a) ï¼Œ [Kotlin](/javarevisited/top-5-courses-to-learn-kotlin-in-2020-dfc3fa7706d8) ï¼Œä»¥åŠ [YAML](https://javarevisited.blogspot.com/2021/11/top-5-courses-to-learn-yaml-in-2022.html) )æ¥å®šä¹‰è·¯ç”±å’Œä¸­ä»‹è§„åˆ™ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨ IDE ä¸­æ™ºèƒ½åœ°å®Œæˆè·¯ç”±è§„åˆ™ï¼Œæ— è®ºæ˜¯åœ¨ Java è¿˜æ˜¯ XML ç¼–è¾‘å™¨ä¸­ã€‚

Apache Camel ä½¿ç”¨ [URIs](https://camel.apache.org/manual/uris.html) æ¥ç›´æ¥å¤„ç†ä»»ä½•ç±»å‹çš„ä¼ è¾“æˆ–æ¶ˆæ¯æ¨¡å‹ï¼Œå¦‚ [HTTP](https://camel.apache.org/components/3.15.x/http-component.html) ã€ [ActiveMQ](https://camel.apache.org/components/3.15.x/activemq-component.html) ã€ [JMS](https://camel.apache.org/components/3.15.x/jms-component.html) ã€ã€JBIã€‘SCAã€ [MINA](https://camel.apache.org/components/3.15.x/mina-component.html) æˆ– [CXF](https://camel.apache.org/components/3.15.x/cxf-component.html) ï¼Œä»¥åŠå¯æ’æ‹”çš„[ç»„ä»¶](https://camel.apache.org/manual/component.html)å’Œ[æ•°æ®æ ¼å¼](https://camel.apache.org/manual/data-format.html)é€‰é¡¹ã€‚Apache Camel æ˜¯ä¸€ä¸ªå¾ˆå°çš„åº“ï¼Œå…·æœ‰æœ€å°‘çš„[ä¾èµ–æ€§](https://camel.apache.org/manual/what-are-the-dependencies.html)ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°åµŒå…¥åˆ°ä»»ä½• Java åº”ç”¨ç¨‹åºä¸­ã€‚Apache Camel å…è®¸æ‚¨ä½¿ç”¨ç›¸åŒçš„ [API](https://camel.apache.org/manual/exchange.html) å·¥ä½œï¼Œä¸ç®¡ä½¿ç”¨å“ªç§ä¼ è¾“æ–¹å¼â€”â€”æ‰€ä»¥å­¦ä¹ ä¸€æ¬¡ APIï¼Œæ‚¨å°±å¯ä»¥ä¸å¼€ç®±å³ç”¨çš„æ‰€æœ‰[ç»„ä»¶](https://camel.apache.org/components/3.15.x/index.html)è¿›è¡Œäº¤äº’ã€‚

Apache Camel æ”¯æŒ Bean ç»‘å®šä»¥åŠä¸ CDIã€ [Spring](https://camel.apache.org/manual/spring.html) ç­‰æµè¡Œæ¡†æ¶çš„æ— ç¼é›†æˆã€‚Camel ä¹Ÿå¹¿æ³›æ”¯æŒ[å•å…ƒæµ‹è¯•](https://camel.apache.org/manual/testing.html)ä½ çš„è·¯çº¿ã€‚

## âš¡ä¸ºä»€ä¹ˆä½¿ç”¨é˜¿å¸•å¥‡éª†é©¼ï¼Ÿ

è®©æˆ‘ä»¬è¯•ç€åˆ—å‡º Apache Camel çš„ä¸€äº›ç”¨ä¾‹

1.  ä¸º**ä¼ä¸šé›†æˆæ¨¡å¼(EIP)** æä¾›æ”¯æŒ
2.  **éšå¤„è¿è¡Œ** :- Apache Camel æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥ä½œä¸ºåº“åµŒå…¥åˆ° [Spring Boot](/javarevisited/10-free-spring-boot-tutorials-and-courses-for-java-developers-53dfe084587e) ã€ [Quarkus](/javarevisited/10-best-free-dropwizard-vert-x-micronaut-and-quarkus-online-courses-for-java-developers-9c2b4161f17) ã€åº”ç”¨æœåŠ¡å™¨å’Œäº‘ä¸­ã€‚Camel å­é¡¹ç›®è‡´åŠ›äºç®€åŒ–æ‚¨çš„å·¥ä½œã€‚
3.  **æŒ¤æ»¡äº†ç»„ä»¶** :-æŒ¤æ»¡äº†æ•°ç™¾ä¸ªç»„ä»¶ï¼Œç”¨äºè®¿é—®æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€API æˆ–å¤©åº•ä¸‹çš„ä»»ä½•ä¸œè¥¿ã€‚å¸®åŠ©ä½ èå…¥ä¸€åˆ‡ã€‚
4.  **æ”¯æŒè¶…è¿‡ 50 ç§æ•°æ®æ ¼å¼** :- Camel æ”¯æŒå¤§çº¦ 50 ç§æ•°æ®æ ¼å¼ï¼Œå…è®¸ç¿»è¯‘å¤šç§æ ¼å¼çš„æ¶ˆæ¯ï¼Œå¹¶æ”¯æŒé‡‘èã€ç”µä¿¡ã€åŒ»ç–—ä¿å¥ç­‰è¡Œä¸šæ ‡å‡†æ ¼å¼ã€‚

## âš¡å¦‚ä½•ä½¿ç”¨é€‰æ‹©å’Œå½“åœ¨é˜¿å¸•å¥‡éª†é©¼ï¼Ÿ

å˜¿ï¼ŒğŸ–Communityï¼Œåœ¨æ–‡ç« çš„å‰ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬è¯•å›¾è§£é‡Šä¸ºä»€ä¹ˆ&é˜¿å¸•å¥‡éª†é©¼æ€ä¹ˆæ ·ï¼Ÿåœ¨ç¬¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å°è¯•ç†è§£ç›¸åŒçš„å®ç°ã€‚

åœ¨ç›´æ¥è¿›å…¥å®ç°ä¹‹å‰ï¼Œä¸è¦å¿˜è®°çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ Apache Camel ç¼–å†™ç¬¬ä¸€æ¡è·¯çº¿ï¼Ÿä»ä¸‹é¢çš„é“¾æ¥

[](https://rohankadam965.medium.com/apache-camel-how-to-write-first-route-7f7767c86c2a) [## é˜¿å¸•å¥‡éª†é©¼ğŸ¦’:å¦‚ä½•å†™ç¬¬ä¸€æ¡è·¯çº¿ï¼Ÿ

### ä½ å¥½ï¼Œæˆ‘æ˜¯ç½—æ±‰Â·å¡è¾¾å§†ğŸ˜Š,

rohankadam965.medium.com](https://rohankadam965.medium.com/apache-camel-how-to-write-first-route-7f7767c86c2a) 

## æ­¥éª¤ 1:å¦‚ä½•ä½¿ç”¨ Spring Initializr åˆ›å»ºé¡¹ç›®ï¼Ÿ

[](https://start.spring.io/) [## å¼¹ç°§åˆå§‹åŒ– r

### Initializr ç”Ÿæˆä¸€ä¸ª spring boot é¡¹ç›®ï¼Œå…¶ä¸­åŒ…å«æ‚¨å¿«é€Ÿå¯åŠ¨æ‰€éœ€çš„å†…å®¹ï¼

start.spring.io](https://start.spring.io/) 

## æ­¥éª¤ 2:é¡¹ç›®ä¸­åŒ…æ‹¬å“ªäº›ä¾èµ–é¡¹ï¼Ÿ

[![](img/ba573deeffd99de9bc6a37f6001e038f.png)](https://javarevisited.blogspot.com/2019/03/top-5-course-to-learn-apache-maven-for.html)

åŠŸåŠ³:[ç½—æ±‰Â·æ‹‰æ¸©å¾·æ‹‰Â·å¡è¾¾å§†](https://medium.com/u/a1b33b7cda75?source=post_page-----4f16c67bfa80--------------------------------)å±åœ°

## æ­¥éª¤ 3:å¦‚ä½•åœ¨ apache camel ä¸­ä½¿ç”¨ choice å’Œ whenï¼Ÿ

Apache Camel åŒ…å«ä¸€ä¸ªå¼ºå¤§çš„ç‰¹æ€§ï¼Œå«åš**åŸºäºå†…å®¹çš„è·¯ç”±å™¨ã€‚**è¿™å…è®¸æ‚¨æ ¹æ®å†…å®¹å¯¹æ¶ˆæ¯è¿›è¡Œä¸åŒçš„å¤„ç†ã€‚

å®ƒä»¬ä¸ Java ä¸­çš„`if/else`è¯­å¥éå¸¸ç›¸ä¼¼ã€‚ä¸ç®¡æ€æ ·ï¼Œåœ¨ Camel ä¸­ï¼Œå¯¹åº”çš„è¯æ˜¯`when`å’Œ`otherwise`ã€‚

```
package com.example.apachecameltest.route;

import org.apache.camel.builder.RouteBuilder;
import org.springframework.stereotype.Component;

@Component
public class ChoiceWhenRoute extends RouteBuilder {
    @Override
    public void configure() throws Exception {

        from("direct:startWhenChoiceRoute")
                .routeId("direct:startWhenChoiceRoute")
                .log( "${body}")
                .choice()
                    .when(body().isNull())
                        .log("Message body is empty.")
                .log("${body}")
                .end();
    }
}
```

## ç¬¬å››æ­¥:æµ‹è¯•æˆ‘ä»¬çš„éª†é©¼è·¯çº¿ï¼Ÿ

ä¸ºäº†æµ‹è¯•æˆ‘ä»¬çš„éª†é©¼è·¯çº¿ï¼Œå°†ä½¿ç”¨æ§åˆ¶å™¨ç«¯ç‚¹

```
package com.example.apachecameltest;

import org.apache.camel.CamelContext;
import org.apache.camel.Exchange;
import org.apache.camel.ProducerTemplate;
import org.apache.camel.builder.ExchangeBuilder;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class Controler {

    @Autowired
    private ProducerTemplate producerTemplate;

    @Autowired
    private CamelContext camelContext;

    @GetMapping
    public void function() {
        final Exchange
                requestExchange = ExchangeBuilder
                .*anExchange*(camelContext)
                .build();

      producerTemplate
         .send("direct:startWhenChoiceRoute",requestExchange);

    }
}
```

å˜¿ï¼ŒğŸ–ï¼Œè¦äº†è§£æ›´å¤šå…³äº ProducerTemplate & Camel çš„å†…å®¹ï¼Œè¯·ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥

 [## Apache Camel å¸®åŠ©æ‚¨é›†æˆ 300 å¤šä¸ªä¸åŒçš„ç³»ç»Ÿï¼

### ProducerTemplate æ¥å£å…è®¸æ‚¨ä»¥å„ç§ä¸åŒçš„æ–¹å¼å‘ç«¯ç‚¹å‘é€æ¶ˆæ¯äº¤æ¢ï¼Œä»¥ä½¿â€¦

camel.apache.org](https://camel.apache.org/manual/producertemplate.html) [](https://camel.apache.org/manual/camelcontext.html) [## Apache Camel å¸®åŠ©æ‚¨é›†æˆ 300 å¤šä¸ªä¸åŒçš„ç³»ç»Ÿï¼

### CamelContext æ˜¯ä½œä¸ºè¿è¡Œæ—¶ Camel çš„å®¹å™¨ã€‚CamelContext æ˜¯è¿è¡Œæ—¶ç³»ç»Ÿï¼Œå®ƒåŒ…å«â€¦

camel.apache.org](https://camel.apache.org/manual/camelcontext.html) 

## ç¬¬äº”æ­¥:éª†é©¼è·¯çº¿è¾“å‡ºï¼Ÿ

```
 direct:startWhenChoiceRoute              : null
 direct:startWhenChoiceRoute              : Message body is empty.
 direct:startWhenChoiceRoute              : null
```

## ğŸ–Conclusion:-

åœ¨æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è¯•å›¾åœ¨ apache camel ä¸­å®ç° choice å’Œ whenã€‚æˆ‘ä»¬ä¹Ÿè¯•å›¾äº†è§£ä¸€äº›å…³äºé˜¿å¸•å¥‡éª†é©¼çš„äº‹æƒ…ã€‚è¯·åˆ†äº«å’Œå–œæ¬¢ğŸ’•å¦‚æœä½ è§‰å¾—æ–‡ç« æœ‰ç”¨ã€‚åœ¨åª’ä½“ä¸Šå…³æ³¨æˆ‘ï¼Œåœ¨æ¨ç‰¹ä¸Šå…³æ³¨æˆ‘ï¼Œå…³æ³¨æˆ‘ï¼Œå…³æ³¨æˆ‘ï¼Œå…³æ³¨æˆ‘ï¼Œå…³æ³¨æˆ‘ï¼Œå…³æ³¨æˆ‘ï¼Œå…³æ³¨æˆ‘ï¼Œå…³æ³¨æˆ‘

## âš¡Bibliography

[](https://camel.apache.org/) [## ä¸»é¡µ

### Camel æ”¯æŒ Gregor Hohpe å’Œ Bobby Woolf çš„ä¼˜ç§€è‘—ä½œä¸­çš„å¤§å¤šæ•°ä¼ä¸šé›†æˆæ¨¡å¼ï¼Œå¹¶ä¸”â€¦

camel.apache.org](https://camel.apache.org/) [](/javarevisited/how-to-implement-exception-handling-using-apache-camel-26faad831e8f) [## å¦‚ä½•ä½¿ç”¨ Apache Camel å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ

### ä½ å¥½ï¼ŒğŸ–ï¼Œæˆ‘è‡ªå·±ï¼Œç½—æ±‰Â·æ‹‰æ¸©å¾·æ‹‰Â·å¡è¾¾å§†

medium.com](/javarevisited/how-to-implement-exception-handling-using-apache-camel-26faad831e8f) [](/javarevisited/how-to-consume-public-api-using-apache-camel-70f7382959ab) [## å¦‚ä½•ä½¿ç”¨ Apache Camel æ¶ˆè´¹å…¬å…± APIï¼Ÿ

### HelloğŸ–æˆ‘è‡ªå·± Rohan Ravindra Kadamï¼Œå…¨æ ˆå¼€å‘è€…

medium.com](/javarevisited/how-to-consume-public-api-using-apache-camel-70f7382959ab) ![](img/8952bc045d848312bfba126ae001248a.png)

è°¢è°¢è§‚ä¼—ä»¬â€” [ç½—æ±‰Â·æ‹‰æ¸©å¾·æ‹‰Â·å¡è¾¾å§†](https://medium.com/u/a1b33b7cda75?source=post_page-----4f16c67bfa80--------------------------------)