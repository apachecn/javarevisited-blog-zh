# ä½¿ç”¨ SendGrid å’Œ spring boot å‘é€ç”µå­é‚®ä»¶

> åŸæ–‡ï¼š<https://medium.com/javarevisited/sending-emails-with-sendgrid-and-spring-boot-81e9637a1f05?source=collection_archive---------1----------------------->

![](img/f6f2a8b93599d45c24592cd954e4014d.png)

# ä»€ä¹ˆæ˜¯ SendGridï¼Ÿ

SendGrid æ˜¯ä¸€ä¸ªåŸºäºäº‘çš„ SMTP æä¾›å•†ï¼Œå…è®¸ä½ å‘é€ç”µå­é‚®ä»¶ï¼Œè€Œä¸å¿…ç»´æŠ¤ç”µå­é‚®ä»¶æœåŠ¡å™¨ã€‚ **SendGrid** ç®¡ç†æ‰€æœ‰çš„æŠ€æœ¯ç»†èŠ‚ï¼Œä»æ‰©å±•åŸºç¡€è®¾æ–½åˆ° ISP æ‹“å±•å’Œä¿¡èª‰ç›‘æ§åˆ°ç™½åå•æœåŠ¡å’Œå®æ—¶åˆ†æã€‚

# åˆ›å»ºå¸æˆ·:

  

ç„¶åç™»å½•æ‚¨çš„å¸æˆ·:

![](img/0b49522eb1f4ebff21b68cfff38563d1.png)

ä½ ä¼šçœ‹åˆ°è¿™æ ·çš„ä¸œè¥¿ã€‚

# åˆ›å»ºå¼¹ç°§å¯åŠ¨åº”ç”¨ç¨‹åº:

ã€https://start.spring.io/ 

ä¾èµ–é¡¹:Spring Web å’Œ Spring Boot å¼€å‘å·¥å…·ã€‚

![](img/b663121ec5a473508e79ecc85f292169.png)

ä¸‹è½½å¹¶è§£å‹ç¼©é¡¹ç›®åï¼Œæ·»åŠ è¿™ä¸ªä¾èµ–é¡¹:

```
<dependency><groupId>com.sendgrid</groupId><artifactId>sendgrid-java</artifactId><version>4.0.1</version></dependency>
```

è¯·å‚è§ä¸‹é¢çš„ pom.xml:

# åˆ›å»ºå•ä¸€å‘ä»¶äººéªŒè¯:

å¯¼èˆªåˆ°[https://app.sendgrid.com/settings/sender_auth/senders](https://app.sendgrid.com/settings/sender_auth/senders):

![](img/3514c726ee028911044064e674c8d823.png)![](img/e90620bbd84a71df786cdf8ff720ceee.png)

å¡«å†™å®Œæ‰€æœ‰è¾“å…¥åï¼Œç‚¹å‡»åˆ›å»ºæŒ‰é’®ã€‚ç„¶åä½ ä¼šæ”¶åˆ°ä¸€å°æ¿€æ´»é‚®ä»¶ã€‚

# å‘é€ç”µå­é‚®ä»¶:

## 1.è·å– API å¯†é’¥:

![](img/dd2e48a4310623244c67d1a00f2bca72.png)

åœ¨æ§åˆ¶é¢æ¿ä¸­ï¼Œå•å‡»ç”µå­é‚®ä»¶ APIï¼Œç„¶åå•å‡»é›†æˆæŒ‡å—ã€‚

![](img/81c90efd72f27df858deeb1e65ae5973.png)![](img/17228320046f22fdffb29b346ae0f366.png)

é€‰æ‹©äº† Web API

![](img/f2b0757858c3a1347f9a3081d5499a40.png)

ç„¶åæ˜¯ java:

![](img/5a855187c7fd7c2e9733269445c19b20.png)

è¾“å…¥å¯†é’¥åï¼Œç„¶åå•å‡»åˆ›å»ºæŒ‰é’®

![](img/8c48821ee90f5c45059edf9c2a93f589.png)

å¤åˆ¶æ‚¨çš„ API å¯†é’¥ã€‚

## 2.åˆ›å»ºæœåŠ¡:

## 3.åˆ›å»ºé™æ­¢æ§åˆ¶å™¨:

## 4.æµ‹è¯• API:

è®ºé‚®é€’å‘˜

post:[http://localhost:8080/API/send-text](http://localhost:8888/api/send-text)

æ‚¨å°†æ”¶åˆ°ä¸€å°ç”µå­é‚®ä»¶ï¼Œç¡®è®¤æ‚¨çš„åƒåœ¾é‚®ä»¶ã€‚

# å‘é€å¸¦æœ‰åŠ¨æ€æ¨¡æ¿çš„ç”µå­é‚®ä»¶:

SendGrid ä½¿æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨æ¨¡æ¿æˆ–åˆ›å»ºè‡ªå·±çš„æ¨¡æ¿ã€‚

## 1.è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¨¡æ¿:

å¯¼èˆª[æ­¤å¤„](https://mc.sendgrid.com/dynamic-templates)

![](img/92f84618821275a854117b2a67a419b9.png)![](img/d8c3901fd26b39b7a228dc5c110ba735.png)![](img/fba3f2b82d35db811b1b04e1b02fb366.png)![](img/3585434e95ea1c6a7fb08506c5be8557.png)

ç‚¹å‡» SendGrid ç”µå­é‚®ä»¶è®¾è®¡ï¼Œæˆ‘ä»¬å°†é€‰æ‹©ä¸€ä¸ªé¢„å»ºçš„ã€‚

æˆ‘é€‰æ‹©è„±ç¦»ç”µç½‘å†’é™©ã€‚

![](img/2609269e555ebdf2b2436c5f95b3f85c.png)

ç„¶åé€‰æ‹©è®¾è®¡ç¼–è¾‘å™¨

![](img/162fa0c05cee8e49a42560549bd02563.png)

ç°åœ¨è®©æˆ‘ä»¬ç»™æ¨¡æ¿æ·»åŠ ä¸€äº›ä¿®æ”¹ã€‚

å•å‡»æ¬¢è¿åŠ å…¥å®¶åº­ï¼Œå¹¶å°†æ–‡æœ¬æ›´æ”¹ä¸º

æ¬¢è¿{ {åå­—}}

**{{first_name}}** è¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå°†ä½¿ç”¨ä»£ç åŠ¨æ€æ›´æ”¹ã€‚

![](img/5139339e2b68311c81505cce5e6af1e2.png)

å•å‡»é¢„è§ˆæŸ¥çœ‹è¾“å‡º

![](img/66274ef5e1bdfe2c2ce0b7af9efab913.png)

å•å‡»æ˜¾ç¤ºæµ‹è¯•æ•°æ®

![](img/5ac58b5ddd987a26c43c819927726af3.png)

æ¨¡æ¿å·²åŠ¨æ€æ›´æ”¹ã€‚

ç°åœ¨ç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œç„¶åè¿”å›ç®­å¤´

![](img/ad647520157535822d63fa407064bad9.png)![](img/bc5eb85026900ce655c2b07ef5e562db.png)

å¤åˆ¶æ¨¡æ¿ idã€‚

## 2.æ›´æ–°é‚®ä»¶æœåŠ¡:

## 3.æ›´æ–° rest æ§åˆ¶å™¨:

```
@PostMapping("/send")public String sendWithTemplate() throws IOException {return mailService.send();}
```

## 4.æµ‹è¯•æ–°çš„ API:

è®ºé‚®é€’å‘˜

post:[http://localhost:8080/API/send](http://localhost:8888/api/send-text)

æ‚¨å°†æ”¶åˆ°ä¸€å°å¸¦æœ‰æˆ‘ä»¬æ¨¡æ¿çš„ç”µå­é‚®ä»¶ã€‚

éªŒè¯æ‚¨çš„åƒåœ¾é‚®ä»¶ã€‚

# æœ€åä¸€å¥è¯:

æ‚¨å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æºä»£ç :

  

**å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·é¼“æŒ**ğŸ‘**åˆ†äº«å®ƒï¼Œè®©å…¶ä»–äººä¹Ÿèƒ½æ‰¾åˆ°å®ƒï¼å…³æ³¨æˆ‘ï¼Œäº†è§£æˆ‘æ›´å¤šä¿¡æ¯**ğŸ˜„ã€‚