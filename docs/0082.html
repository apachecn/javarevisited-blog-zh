<html>
<head>
<title>Writing a Unit Test using Spring Boot (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨ Spring Boot ç¼–å†™å•å…ƒæµ‹è¯•(ç¬¬ 2 éƒ¨åˆ†)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/javarevisited/writing-a-unit-test-using-spring-boot-part-2-b16847484cb9?source=collection_archive---------0-----------------------#2019-06-16">https://medium.com/javarevisited/writing-a-unit-test-using-spring-boot-part-2-b16847484cb9?source=collection_archive---------0-----------------------#2019-06-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="429d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨æˆ‘æè¿°äº†â€œ<a class="ae jd" rel="noopener" href="/@yigitcannalci/building-a-rest-service-with-spring-boot-and-mongodb-3aa5cd2dce73?source=friends_link&amp;sk=582face6df6e23be283b543ae804552e"> <em class="je">å¦‚ä½•ä½¿ç”¨ Spring Boot å’Œ MongoDB </em> </a>å¼€å‘ REST æœåŠ¡â€ä¹‹åï¼Œæˆ‘å†³å®šè§£é‡Šä¸€ä¸‹<em class="je">å¦‚ä½•ä½¿ç”¨ Spring Boot </em>ç¼–å†™å•å…ƒæµ‹è¯•ã€‚</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/830552352f46b45c7ec447ba70c97c83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wLiOxLHD-M4IQCH-lYCW7w.jpeg"/></div></div><p class="jr js et er es jt ju bd b be z dx translated">ä¹Œå¾·ç±³</p></figure><p id="4c46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œå•å…ƒæµ‹è¯•æ˜¯åœ¨å‰é¢çš„æ•…äº‹ä¸­å¼€å‘çš„é¡¹ç›®<a class="ae jd" rel="noopener" href="/@yigitcannalci/building-a-rest-service-with-spring-boot-and-mongodb-3aa5cd2dce73?source=friends_link&amp;sk=582face6df6e23be283b543ae804552e">ä¸­ç¼–å†™çš„ï¼Œæ‰€ä»¥å‰é¢çš„é¡¹ç›®ä¸­ä½¿ç”¨çš„æŠ€æœ¯å’Œè®¾ç½®æ˜¯ç›¸åŒçš„ã€‚</a></p><p id="6bad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ‚¨å¯ä»¥ä»è¿™ä¸ª<a class="ae jd" href="https://github.com/ragcrix/StudentInformationSystem" rel="noopener ugc nofollow" target="_blank"> GitHub </a>é“¾æ¥ä¸‹è½½é¡¹ç›®æºä»£ç ã€‚</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es jv"><img src="../Images/4e6828ac44eb9dd9c8c7de6f9d212114.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*MR-bbhz8fQD5Na-GBGm9lA.png"/></div><p class="jr js et er es jt ju bd b be z dx translated">å¼€æºä»£ç åº“</p></figure><p id="536e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Spring Boot ç”¨<code class="du jw jx jy jz b">SpringRunner</code>ç®€åŒ–å•å…ƒæµ‹è¯•ã€‚ç”¨<code class="du jw jx jy jz b">MockMVC</code>ä¸º REST æ§åˆ¶å™¨ç¼–å†™å•å…ƒæµ‹è¯•ä¹Ÿæ›´å®¹æ˜“ã€‚ä¸ºäº†ç¼–å†™ä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼ŒSpring Boot å¯åŠ¨æµ‹è¯•ä¾èµ–é¡¹åº”è¯¥è¢«æ·»åŠ åˆ°æ‚¨çš„æ„å»ºé…ç½®æ–‡ä»¶ä¸­(å¯¹äºæˆ‘ä»¬çš„é¡¹ç›®ï¼Œ<strong class="ih hj"> pom.xml </strong>)ã€‚</p><pre class="jg jh ji jj fd ka jz kb kc aw kd bi"><span id="c19f" class="ke kf hi jz b fi kg kh l ki kj">&lt;dependency&gt;<br/>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;<br/>    &lt;scope&gt;test&lt;/scope&gt;<br/>&lt;/dependency&gt;</span></pre><p id="e4fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™æ ·åšä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå•å…ƒæµ‹è¯•äº†ã€‚</p><h1 id="b274" class="kk kf hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">StudentService.java çš„æµ‹è¯•</h1><p id="5680" class="pw-post-body-paragraph if ig hi ih b ii lh ik il im li io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä¸ºå›¾ä¸­æ‰€ç¤ºçš„<strong class="ih hj">StudentService.java</strong>å®ç°ä¸€ä¸ªå•å…ƒæµ‹è¯•ã€‚</p><pre class="jg jh ji jj fd ka jz kb kc aw kd bi"><span id="996a" class="ke kf hi jz b fi kg kh l ki kj">@Service<br/>public class StudentServiceImpl implements StudentService {<br/><br/>    @Autowired<br/>    private StudentRepository studentRepository;<br/><br/>    @Override<br/>    public List&lt;Student&gt; findAll() {<br/>        return studentRepository.findAll();<br/>    }<br/><br/>    @Override<br/>    public Student findByStudentNumber(long studentNumber) {<br/>        return studentRepository.findByStudentNumber(studentNumber);<br/>    }<br/><br/>    @Override<br/>    public Student findByEmail(String email) {<br/>        return studentRepository.findByEmail(email);<br/>    }<br/><br/>    @Override<br/>    public List&lt;Student&gt; findAllByOrderByGpaDesc() {<br/>        return studentRepository.findAllByOrderByGpaDesc();<br/>    }<br/><br/>    @Override<br/>    public Student saveOrUpdateStudent(Student student) {<br/>        return studentRepository.save(student);<br/>    }<br/><br/>    @Override<br/>    public void deleteStudentById(String id) {<br/>        studentRepository.deleteById(id);<br/>    }<br/>}</span></pre><p id="ba8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç±»ä¸Šé¢å†™<code class="du jw jx jy jz b">@RunWith(SpringRunner.class)</code>æ³¨é‡Šã€‚è¿™ä¸ªæ³¨é‡Šä½¿ç”¨<code class="du jw jx jy jz b">SpringJUnit4ClassRunner</code>æ¥è¿è¡Œå•å…ƒæµ‹è¯•ã€‚</p><p id="585b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç¬¬äºŒï¼Œ<code class="du jw jx jy jz b">@SpringBootTest</code>æ³¨é‡Šè¡¥å……ã€‚è¿™ä¸ªæ³¨é‡Šä¸ºæµ‹è¯•ç±»æä¾›äº†è®¸å¤šç‰¹æ€§ã€‚æ›´å¤šä¿¡æ¯è¯·ç‚¹å‡»<a class="ae jd" href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/context/SpringBootTest.html" rel="noopener ugc nofollow" target="_blank">æ­¤å¤„</a>ã€‚</p><p id="0070" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç„¶åï¼Œæ·»åŠ è¦æµ‹è¯•çš„ç±»(<strong class="ih hj">StudentService.java</strong>)åŠå…¶ä¾èµ–é¡¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="jg jh ji jj fd ka jz kb kc aw kd bi"><span id="b62b" class="ke kf hi jz b fi kg kh l ki kj">@RunWith(SpringRunner.class)<br/>@SpringBootTest<br/>public class StudentServiceTest {<br/><br/>   @Autowired<br/>    private StudentService studentService;<br/><br/>    @MockBean<br/>    private StudentRepository studentRepository;</span><span id="3741" class="ke kf hi jz b fi lm kh l ki kj">    ...</span><span id="0a5e" class="ke kf hi jz b fi lm kh l ki kj">}</span></pre><p id="c74a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™æ¨¡æ‹Ÿå¯¹è±¡æ¥æµ‹è¯• StudentService.java äº†ã€‚Ragcrix å’Œ yigit è¢«åˆ›å»ºã€‚ä»¥ä¸‹å€¼è¢«åˆ†é…ç»™å¯¹è±¡ã€‚</p><pre class="jg jh ji jj fd ka jz kb kc aw kd bi"><span id="1aee" class="ke kf hi jz b fi kg kh l ki kj">private Student ragcrix;<br/>private Student yigit;<br/><br/>private final Long ragcrixStudentNumber = 23L;<br/>private final Long yigitStudentNumber = 91L;<br/>private final String ragcrixEmail = "ragcrix@rg.com";<br/>private final String yigitEmail = "yigit@ygt.com";<br/>private final List&lt;Student&gt; students = new ArrayList&lt;&gt;();<br/><br/>@Before<br/>public void setup() {<br/>    ragcrix = new Student();<br/>    ragcrix.setId("aBc123");<br/>    ragcrix.setName("ragcrix");<br/>    ragcrix.setEmail(ragcrixEmail);<br/>    ragcrix.setStudentNumber(ragcrixStudentNumber);<br/>    ragcrix.setCourseList(Arrays.<em class="je">asList</em>("Math", "Science"));<br/>    ragcrix.setGpa(3.37f);<br/><br/>    yigit = new Student();<br/>    yigit.setId("dEf345");<br/>    yigit.setName("yigit");<br/>    yigit.setEmail(yigitEmail);<br/>    yigit.setStudentNumber(yigitStudentNumber);<br/>    yigit.setCourseList(Arrays.<em class="je">asList</em>("Turkish", "German"));<br/>    yigit.setGpa(3.58f);<br/><br/>    students.add(ragcrix);<br/>    students.add(yigit);</span></pre><p id="5b77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¯¹äºå­¦ç”ŸæœåŠ¡ä¸­çš„<code class="du jw jx jy jz b">findAll()</code>æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦æ¨¡ä»¿<strong class="ih hj">StudentRepository.java</strong>ä¸­çš„<code class="du jw jx jy jz b">findAll()</code>æ–¹æ³•ã€‚<strong class="ih hj"> </strong>ä¹‹åï¼Œæˆ‘ä»¬å‡†å¤‡å†™æµ‹è¯•æ–¹æ³•ã€‚ä¸ºæ­¤ï¼Œç¼–å†™äº†<code class="du jw jx jy jz b">testFindAll_thenStudentListShouldBeReturned()</code>æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•åªæ˜¯æ£€æŸ¥è¿”å›æ•°æ®çš„å¤§å°ã€‚</p><pre class="jg jh ji jj fd ka jz kb kc aw kd bi"><span id="6fd9" class="ke kf hi jz b fi kg kh l ki kj">...</span><span id="28ad" class="ke kf hi jz b fi lm kh l ki kj">Mockito.<em class="je">when</em>(studentRepository.findAll()).thenReturn(students);</span><span id="e528" class="ke kf hi jz b fi lm kh l ki kj">...</span><span id="a0d2" class="ke kf hi jz b fi lm kh l ki kj">@Test<br/>public void testFindAll_thenStudentListShouldBeReturned() {<br/>    List&lt;Student&gt; foundStudents = studentService.findAll();<br/><br/>    <em class="je">assertNotNull</em>(foundStudents);<br/>    <em class="je">assertEquals</em>(2, foundStudents.size());<br/>}</span></pre><p id="4ad2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¯¹äºå­¦ç”ŸæœåŠ¡ä¸­çš„<code class="du jw jx jy jz b">findByStudentNumber()</code>æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦æ¨¡ä»¿<strong class="ih hj">StudentRepository.java</strong>ä¸­çš„<code class="du jw jx jy jz b">findByStudentNumber()</code>æ–¹æ³•ã€‚<strong class="ih hj"> </strong>ä¹‹åï¼Œæˆ‘ä»¬å‡†å¤‡å†™æµ‹è¯•æ–¹æ³•ã€‚å¯¹äºè¿™ä¸€ç‚¹ï¼Œ<code class="du jw jx jy jz b">testFindByStudentNumber23_thenRagcrixShouldBeReturned()</code>æ³•æ˜¯è¿™æ ·å†™çš„ã€‚</p><pre class="jg jh ji jj fd ka jz kb kc aw kd bi"><span id="c46a" class="ke kf hi jz b fi kg kh l ki kj">...</span><span id="7181" class="ke kf hi jz b fi lm kh l ki kj">Mockito.<em class="je">when</em>(studentRepository.findByStudentNumber<br/>(ragcrixStudentNumber)).thenReturn(ragcrix);</span><span id="118e" class="ke kf hi jz b fi lm kh l ki kj">...</span><span id="e22a" class="ke kf hi jz b fi lm kh l ki kj">@Test<br/>public void testFindByStudentNumber23_thenRagcrixShouldBeReturned() {<br/>    Student found = studentService.findByStudentNumber(ragcrixStudentNumber);<br/><br/>    <em class="je">assertNotNull</em>(found);<br/>    <em class="je">assertEquals</em>(ragcrix.getName(), found.getName());<br/>    <em class="je">assertEquals</em>(ragcrix.getId(), found.getId());<br/>}</span></pre><p id="7ad2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¯¹äºå­¦ç”ŸæœåŠ¡ä¸­çš„<code class="du jw jx jy jz b">findByEmail()</code>ã€<code class="du jw jx jy jz b">findAllByOrderByGpaDesc()</code>ã€<code class="du jw jx jy jz b">saveOrUpdateStudent()</code>ã€<code class="du jw jx jy jz b">deleteStudentById()</code>æ–¹æ³•ï¼Œ<strong class="ih hj">ã€</strong>ä¸­çš„ç›¸å…³æ–¹æ³•åŒæ ·è¢«æ¨¡ä»¿ã€‚ç„¶åï¼ŒStudentService çš„æµ‹è¯•æ–¹æ³•ç¼–å†™å¦‚ä¸‹ã€‚</p><pre class="jg jh ji jj fd ka jz kb kc aw kd bi"><span id="4a8a" class="ke kf hi jz b fi kg kh l ki kj"><br/>...</span><span id="3d50" class="ke kf hi jz b fi lm kh l ki kj">Mockito.<em class="je">when</em>(studentRepository.findByEmail(yigitEmail))<br/>        .thenReturn(yigit);<br/><br/>Mockito.<em class="je">when</em>(studentRepository.findAllByOrderByGpaDesc())<br/>        .thenReturn(students.stream().sorted(<br/>                Comparator.<em class="je">comparing</em>(Student::getGpa).reversed()).collect(Collectors.<em class="je">toList</em>()));<br/><br/>Mockito.<em class="je">when</em>(studentRepository.save(ragcrix)).thenReturn(ragcrix);</span><span id="c5bb" class="ke kf hi jz b fi lm kh l ki kj">...</span><span id="d351" class="ke kf hi jz b fi lm kh l ki kj">@Test<br/>public void testFindByEmail_thenYigitShouldBeReturned() {<br/>    Student found = studentService.findByEmail(yigitEmail);<br/><br/>    <em class="je">assertNotNull</em>(found);<br/>    <em class="je">assertEquals</em>(yigit.getName(), found.getName());<br/>    <em class="je">assertEquals</em>(yigit.getId(), found.getId());<br/>}<br/><br/>@Test<br/>public void testFindAllByOrderByGpaDesc_thenStudentsShouldBeReturned_byGPADesc() {<br/>    List&lt;Student&gt; foundStudents = studentService.findAllByOrderByGpaDesc();<br/><br/>    <em class="je">assertNotNull</em>(foundStudents);<br/>    <em class="je">assertEquals</em>(2, foundStudents.size());<br/>    <em class="je">assertEquals</em>(yigit.getName(), foundStudents.get(0).getName());<br/>    <em class="je">assertEquals</em>(yigit.getId(), foundStudents.get(0).getId());<br/>}<br/><br/>@Test<br/>public void testSaveOrUpdateStudent_thenStudentShouldBeReturned() {<br/>    Student found = studentService.saveOrUpdateStudent(ragcrix);<br/><br/>    <em class="je">assertNotNull</em>(found);<br/>    <em class="je">assertEquals</em>(ragcrix.getName(), found.getName());<br/>    <em class="je">assertEquals</em>(ragcrix.getId(), found.getId());<br/>}<br/><br/>@Test<br/>public void testDeleteStudentById() {<br/>    studentService.deleteStudentById(ragcrix.getId());<br/><br/>    Mockito.<em class="je">verify</em>(studentRepository, Mockito.<em class="je">times</em>(1))<br/>            .deleteById(ragcrix.getId());<br/>}</span></pre><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es ln"><img src="../Images/2c3115695f464fe28e73546fb645cf64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ofjWtX0YDfyDdfcmN2boOw.png"/></div></div><p class="jr js et er es jt ju bd b be z dx translated">StudentServiceTest.java çš„æµ‹è¯•ç»“æœ</p></figure><h1 id="5b2a" class="kk kf hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">StudentRestController.java æµ‹è¯•</h1><p id="ea56" class="pw-post-body-paragraph if ig hi ih b ii lh ik il im li io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">Spring Boot æä¾›äº†ä¸€ç§ä¸º Rest æ§åˆ¶å™¨ç¼–å†™å•å…ƒæµ‹è¯•çš„ç®€å•æ–¹æ³•ã€‚åœ¨<strong class="ih hj">spring JUnit 4 class runner</strong>å’Œ<strong class="ih hj"> MockMVC </strong>çš„å¸®åŠ©ä¸‹ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª web åº”ç”¨ä¸Šä¸‹æ–‡æ¥ä¸º Rest æ§åˆ¶å™¨ç¼–å†™å•å…ƒæµ‹è¯•ã€‚</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es lo"><img src="../Images/657fe5df80b50c6f2bc128060e9e67ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*s1Cho4SgMxrN7rRaIBCYng.jpeg"/></div></div><p class="jr js et er es jt ju bd b be z dx translated"><a class="ae jd" href="https://codeflex.co" rel="noopener ugc nofollow" target="_blank"> codeflex </a></p></figure><p id="4033" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">é¦–å…ˆï¼Œåƒå‰é¢çš„æµ‹è¯•ä¸€æ ·ï¼Œæˆ‘ä»¬å‘æµ‹è¯•ç±»æ·»åŠ å¿…è¦çš„æ³¨é‡Šã€‚<code class="du jw jx jy jz b">MockMvc</code>æ˜¯ä¸€ç±» Spring Boot æµ‹è¯•å·¥å…·ï¼Œå…è®¸ä½ æµ‹è¯•æ§åˆ¶å™¨ï¼Œè€Œä¸å¿…å¯åŠ¨ HTTP æœåŠ¡å™¨ã€‚ç”¨<code class="du jw jx jy jz b">@WebMvcTest</code>æµ‹è¯•ç½‘ç»œæ§åˆ¶å™¨æ›´å®¹æ˜“ã€‚<a class="ae jd" href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/web/servlet/WebMvcTest.html" rel="noopener ugc nofollow" target="_blank">ç‚¹å‡»</a>äº†è§£è¯¦æƒ…ã€‚</p><pre class="jg jh ji jj fd ka jz kb kc aw kd bi"><span id="d96f" class="ke kf hi jz b fi kg kh l ki kj">@RunWith(SpringRunner.class)<br/>@WebMvcTest<br/>public class StudentRestControllerTest {<br/><br/>    @Autowired<br/>    private MockMvc mvc;<br/><br/>    @MockBean<br/>    private StudentService studentService;<br/><br/>    private ObjectMapper objectMapper = new ObjectMapper();</span></pre><p id="3db0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨ä¸º web æ§åˆ¶å™¨æµ‹è¯•å®‰æ’å¥½é…ç½®ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å‘è¿™ä¸ªç±»æ·»åŠ æ¨¡æ‹Ÿå¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="jg jh ji jj fd ka jz kb kc aw kd bi"><span id="25ca" class="ke kf hi jz b fi kg kh l ki kj">private Student ragcrix;<br/>private Student yigit;<br/><br/>private final Long ragcrixStudentNumber = 23L;<br/>private final Long yigitStudentNumber = 91L;<br/><br/>@Before<br/>public void setup() {<br/>    ragcrix = new Student();<br/>    ragcrix.setId("aBc123");<br/>    ragcrix.setName("ragcrix");<br/>    ragcrix.setEmail("ragcrix@rg.com");<br/>    ragcrix.setStudentNumber(ragcrixStudentNumber);<br/>    ragcrix.setCourseList(Arrays.<em class="je">asList</em>("Math", "Science"));<br/>    ragcrix.setGpa(3.37f);<br/><br/>    yigit = new Student();<br/>    yigit.setId("dEf345");<br/>    yigit.setName("yigit");<br/>    yigit.setEmail("yigit@ygt.com");<br/>    yigit.setStudentNumber(yigitStudentNumber);<br/>    yigit.setCourseList(Arrays.<em class="je">asList</em>("Turkish", "German"));<br/>    yigit.setGpa(3.58f);<br/>}</span></pre><p id="1eee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å‡†å¤‡ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ã€‚å¯¹äº<strong class="ih hj">StudentRestController.java</strong>ä¸­çš„<code class="du jw jx jy jz b">getAllStudents()</code>ï¼Œç¼–å†™å¦‚ä¸‹æ–¹æ³•ã€‚<code class="du jw jx jy jz b">mvc.perform()</code>æ–¹æ³•ç”¨äºæµ‹è¯•ç»ˆç‚¹ã€‚ä½ å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•æ¯”è¾ƒé¢„æœŸå’Œå®é™…çš„æ•°æ®ã€‚</p><p id="17e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨è¿™ä¸ªæµ‹è¯•æ–¹æ³•ä¸­ï¼Œå½“è°ƒç”¨<code class="du jw jx jy jz b">studentService.findAll()</code>æ—¶ï¼Œå°†è¿”å›ä¸€ä¸ªå­¦ç”Ÿåˆ—è¡¨ã€‚ä¹‹åï¼Œç”¨<code class="du jw jx jy jz b">mvc.perform()</code>å¯¹æ§åˆ¶å™¨ä¸­çš„<code class="du jw jx jy jz b">getAllStudents()</code>è¿›è¡Œæµ‹è¯•ã€‚</p><pre class="jg jh ji jj fd ka jz kb kc aw kd bi"><span id="1a93" class="ke kf hi jz b fi kg kh l ki kj">@Test<br/>public void givenStudents_whenGetAllStudents_thenReturnJsonArray() throws Exception {<br/>    <em class="je">given</em>(studentService.findAll()).willReturn(Arrays.<em class="je">asList</em>(ragcrix));<br/><br/>    mvc.perform(<em class="je">get</em>("/students/")<br/>            .contentType(MediaType.<em class="je">APPLICATION_JSON</em>))<br/>            .andExpect(<em class="je">status</em>().isOk())<br/>            .andExpect(<em class="je">jsonPath</em>("$", <em class="je">hasSize</em>(1)))<br/>            .andExpect(<em class="je">jsonPath</em>("$[0].name", <em class="je">is</em>(ragcrix.getName())));<br/>}</span></pre><p id="848d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä»–<strong class="ih hj"> GET </strong>æ–¹æ³•çš„æµ‹è¯•å°±åƒ<code class="du jw jx jy jz b">givenStudents_whenGetAllStudents_thenReturnJsonArray()</code>æ–¹æ³•ä¸€æ ·ç¼–å†™ã€‚</p><pre class="jg jh ji jj fd ka jz kb kc aw kd bi"><span id="f7b9" class="ke kf hi jz b fi kg kh l ki kj">@Test<br/>public void givenStudent_whenFindByStudentNumber_thenReturnJsonArray() throws Exception {<br/>    <em class="je">given</em>(studentService.findByStudentNumber(ragcrixStudentNumber)).willReturn(ragcrix);<br/><br/>    mvc.perform(<em class="je">get</em>("/students/byStudentNumber/{studentNumber}", ragcrixStudentNumber)<br/>            .contentType(MediaType.<em class="je">APPLICATION_JSON</em>))<br/>            .andExpect(<em class="je">status</em>().isOk())<br/>            .andExpect(<em class="je">jsonPath</em>("$.name", <em class="je">is</em>(ragcrix.getName())));<br/>}<br/><br/>@Test<br/>public void givenStudent_whenFindAllByOrderByGpaDesc_thenReturnJsonArray() throws Exception {<br/>    <em class="je">given</em>(studentService.findAllByOrderByGpaDesc()).willReturn(Arrays.<em class="je">asList</em>(yigit, ragcrix));<br/><br/>    mvc.perform(<em class="je">get</em>("/students/orderByGpa/")<br/>            .contentType(MediaType.<em class="je">APPLICATION_JSON</em>))<br/>            .andExpect(<em class="je">status</em>().isOk())<br/>            .andExpect(<em class="je">jsonPath</em>("$", <em class="je">hasSize</em>(2)))<br/>            .andExpect(<em class="je">jsonPath</em>("$[0].name", <em class="je">is</em>(yigit.getName())));<br/>}</span></pre><p id="3306" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">GET æ–¹æ³•çš„æµ‹è¯•å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™ POST æ–¹æ³•æµ‹è¯•äº†ã€‚å¯¹äºæ§åˆ¶å™¨ä¸­çš„<code class="du jw jx jy jz b">saveStudent()</code>æ–¹æ³•ï¼Œç¼–å†™<code class="du jw jx jy jz b">saveStudent_itShouldReturnStatusOk()</code>æ–¹æ³•ã€‚åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œ<code class="du jw jx jy jz b">studentService.saveOrUpdateStudent()</code>æ³•é¦–å…ˆè¢«å˜²å¼„ã€‚è¦ä¿å­˜çš„<strong class="ih hj">å­¦ç”Ÿ</strong> <strong class="ih hj">å¯¹è±¡</strong> ( <code class="du jw jx jy jz b">yigit</code>)é€šè¿‡<code class="du jw jx jy jz b">objectMapper</code>è½¬æ¢ä¸º<code class="du jw jx jy jz b">jsonString</code>ã€‚ä¹‹åï¼Œä½¿ç”¨<code class="du jw jx jy jz b">mvc.perform()</code>æ–¹æ³•æµ‹è¯•<code class="du jw jx jy jz b">/save</code>ç»ˆç‚¹ã€‚</p><p id="5255" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¸ç¼–å†™çš„å…¶ä»– GET æ–¹æ³•ä¸€æ ·ï¼Œæ‚¨ä¹Ÿå¯ä»¥æµ‹è¯•<code class="du jw jx jy jz b">/save</code>ç«¯ç‚¹çš„è¿”å›å€¼ã€‚</p><pre class="jg jh ji jj fd ka jz kb kc aw kd bi"><span id="b433" class="ke kf hi jz b fi kg kh l ki kj">@Test<br/>public void saveStudent_itShouldReturnStatusOk() throws Exception {<br/>    <em class="je">given</em>(studentService.saveOrUpdateStudent(<em class="je">any</em>(Student.class))).willReturn(yigit);<br/><br/>    String jsonString = objectMapper.writeValueAsString(yigit);<br/><br/>    mvc.perform(<em class="je">post</em>("/students/save/")<br/>            .contentType(MediaType.<em class="je">APPLICATION_JSON</em>).content(jsonString))<br/>            .andExpect(<em class="je">status</em>().isOk());<br/>}</span></pre><p id="e111" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬åœ¨<strong class="ih hj">StudenRestController.java</strong>çš„æœ€åä¸€ä¸ªæ–¹æ³•æ˜¯<code class="du jw jx jy jz b">deleteStudentByStudentNumber()</code>ã€‚å¯¹äºè¿™ä¸ªæ–¹æ³•ï¼Œå†™çš„æ˜¯<code class="du jw jx jy jz b">deleteStudentByStudentNumber_itShouldReturnStatusOk()</code>ã€‚é¦–å…ˆï¼Œ<strong class="ih hj">StudentService.java</strong>ä¸­çš„ç›¸å…³æ–¹æ³•åƒå…¶ä»–æµ‹è¯•æ–¹æ³•ä¸€æ ·è¢«å˜²è®½ã€‚ä¹‹åç”¨<code class="du jw jx jy jz b">mvc.perform()</code>æµ‹è¯•<code class="du jw jx jy jz b">/delete/{studentNumber}</code>ç»ˆç‚¹ã€‚</p><pre class="jg jh ji jj fd ka jz kb kc aw kd bi"><span id="5a65" class="ke kf hi jz b fi kg kh l ki kj">@Test<br/>public void deleteStudentByStudentNumber_itShouldReturnStatusOk() throws Exception {<br/>    <em class="je">given</em>(studentService.findByStudentNumber(ragcrixStudentNumber)).willReturn(ragcrix);<br/>    Mockito.<em class="je">doNothing</em>().when(studentService).deleteStudentById(<em class="je">any</em>(String.class));<br/><br/>    mvc.perform(<em class="je">delete</em>("/students/delete/{studentNumber}", ragcrixStudentNumber)<br/>            .contentType(MediaType.<em class="je">APPLICATION_JSON</em>))<br/>            .andExpect(<em class="je">status</em>().isOk());<br/>}</span></pre><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es lp"><img src="../Images/c60053d8e335452e9ffbcdd44d9de0b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_LWfToaxYgl9ah79YoA8Mg.png"/></div></div><p class="jr js et er es jt ju bd b be z dx translated">StudentRestControllerTest.java çš„æµ‹è¯•ç»“æœ</p></figure></div><div class="ab cl lq lr gp ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hb hc hd he hf"><h1 id="eb99" class="kk kf hi bd kl km lx ko kp kq ly ks kt ku lz kw kx ky ma la lb lc mb le lf lg bi translated">æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼ğŸ™ä½ çš„æƒ³æ³•å¯¹æˆ‘å¾ˆæœ‰ä»·å€¼ã€‚è¯·éšæ„åˆ†äº«ã€‚ğŸ˜„</h1></div></div>    
</body>
</html>